<section class="quiz">
    <div class="container">
        <div class="row">
            <div class="col-md-12 col-xxl-12">
                <div class="program-quiz__wrapper">
                    <div class="swiper quiz-swiper__college">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide swiper-slide-quiz start__quiz">
                                <div class="quiz__wrapper">
                                    <div class="quiz__wrapper-text">
                                        <div class="quiz__text-title">
                                            Подобрать программу обучения
                                        </div>
                                        <button class="quiz__text-link swiper-btn-next">Начать</button>
                                    </div>
                                    <div class="quiz__wrapper-img">
                                        <picture>
                                            <source srcset="/tpl/imgs/illustration-mobile.svg" type="image/svg"
                                                media="(max-width: 768px)">
                                            <source srcset="/tpl/imgs/illustration.svg" type="image/svg"
                                                media="(min-width: 768px)">
                                            <img src="/tpl/imgs/illustration.svg">
                                        </picture>
                                        <!-- <img src="/img/illustration.svg"> -->
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="swiper-slide-quiz">
                                    <form class="quiz__wrapper">
                                        <div class="quiz__wrapper-text col-md-4">
                                            <div class=" quiz__text-prefix swiper-btn-prev"> <img
                                                    src="/tpl/imgs/Arrow-back.svg"> К предыдущему вопросу</div>
                                            <div class="quiz__text-title">
                                                К каким профессиям вы больше склонны?
                                            </div>
                                        </div>
                                        <div class="quiz__wrapper-input col-md-4">
                                            <label for="humanitarian" class="quiz__input-container">
                                                <input
                                                    onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                    type="radio" name="type" id="humanitarian"
                                                    value="К каким профессиям вы больше склонны?-Гуманитарным">
                                                <div class="quiz__checkbox">

                                                </div>
                                                <label for="humanitarian" for="humanitarian">Гуманитарным</label>
                                            </label>
                                            <label for="technical" class="quiz__input-container">
                                                <input
                                                    onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                    type="radio" name="type" id="technical"
                                                    value="К каким профессиям вы больше склонны?-Техническим">
                                                <div class="quiz__checkbox">

                                                </div>
                                                <label for="humanitarian" for="technical"
                                                    for="technical">Техническим</label>
                                            </label>
                                            <label for="creative" class="quiz__input-container">
                                                <input
                                                    onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                    type="radio" name="type" id="creative"
                                                    value="К каким профессиям вы больше склонны?-Творческим">
                                                <div class="quiz__checkbox">

                                                </div>
                                                <label for="creative" for="creative">Творческим</label>
                                            </label>
                                            <label for="medicine" class="quiz__input-container">
                                                <input
                                                    onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                    type="radio" name="type" id="medicine"
                                                    value="К каким профессиям вы больше склонны?-Медицинским">
                                                <div class="quiz__checkbox">

                                                </div>
                                                <label for="medicine" for="medicine">Медицинским</label>
                                            </label>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="swiper-slide swiper-slide-quiz">
                                <form class="quiz__wrapper">
                                    <div class="quiz__wrapper-text col-md-4 col-xxl-3">
                                        <button class=" quiz__text-prefix swiper-btn-prev"> <img
                                                src="/tpl/imgs/Arrow-back.svg"> К предыдущему вопросу</button>
                                        <div class="quiz__text-title">
                                            Какое у Вас законченное образование?
                                        </div>
                                    </div>
                                    <div class="quiz__wrapper-input col-md-4">
                                        <label for="nineClass" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="nineClass"
                                                value="Какое у Вас законченное образование?-9 классов (учусь/закончил)">
                                            <div class="quiz__checkbox"></div>
                                            <label for="nineClass">9 классов (учусь/закончил)</label>
                                        </label>
                                        <label for="elevenClass" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="elevenClass"
                                                value="Какое у Вас законченное образование?-11 классов (учусь/закончил)">
                                            <div class="quiz__checkbox"></div>
                                            <label for="elevenClass">11 классов (учусь/закончил)</label>
                                        </label>
                                        <label for="middle" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="middle"
                                                value="Какое у Вас законченное образование?-Среднее профессиональное/техническое">
                                            <div class="quiz__checkbox"></div>
                                            <label for="middle">Среднее профессиональное/техническое</label>
                                        </label>
                                        <label for="high" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="high"
                                                value="Какое у Вас законченное образование?-Высшее образование">
                                            <div class="quiz__checkbox"></div>
                                            <label for="high">Высшее образование</label>
                                        </label>
                                        <label for="magistr" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="magistr"
                                                value="Какое у Вас законченное образование?-Магистратура">
                                            <div class="quiz__checkbox"></div>
                                            <label for="magistr">Магистратура</label>
                                        </label>
                                    </div>
                                </form>
                            </div>
                            <div class="swiper-slide swiper-slide-quiz">
                                <form class="quiz__wrapper">
                                    <div class="quiz__wrapper-text col-md-4 col-xxl-3">
                                        <button class=" quiz__text-prefix swiper-btn-prev"> <img
                                                src="/tpl/imgs/Arrow-back.svg"> К предыдущему вопросу</button>
                                        <div class="quiz__text-title">
                                            Куда Вы планируете поступать?
                                        </div>
                                    </div>
                                    <div class="quiz__wrapper-input col-md-4">
                                        <label for="college" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="college"
                                                value="Куда Вы планируете поступать?-Колледж (Техникум)">
                                            <div class="quiz__checkbox"></div>
                                            <label for="college">Колледж (Техникум)</label>
                                        </label>
                                        <label for="bachelor" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="bachelor"
                                                value="Куда Вы планируете поступать?-Высшее образование (Университет/Институт/Академия)">
                                            <div class="quiz__checkbox"></div>
                                            <label for="bachelor">Высшее образование (Университет/Институт/Академия)</label>
                                        </label>
                                        <label for="bachelorTow" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="bachelorTow"
                                                value="Куда Вы планируете поступать?-Второе высшее">
                                            <div class="quiz__checkbox"></div>
                                            <label for="bachelorTow">Второе высшее</label>
                                        </label>
                                        <label for="magistracy" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="magistracy"
                                                value="Куда Вы планируете поступать?-Магистратура">
                                            <div class="quiz__checkbox"></div>
                                            <label for="magistracy">Магистратура</label>
                                        </label>
                                        <label for="postgraduate" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="direction" id="postgraduate"
                                                value="Куда Вы планируете поступать?-Аспирантура">
                                            <div class="quiz__checkbox"></div>
                                            <label for="postgraduate">Аспирантура</label>
                                        </label>
                                    </div>
                                </form>
                            </div>
                            <div class="swiper-slide swiper-slide-quiz">
                                <form class="quiz__wrapper">
                                    <div class="quiz__wrapper-text col-md-4 col-xxl-3">
                                        <button class="quiz__text-prefix swiper-btn-prev"> <img
                                                src="/tpl/imgs/Arrow-back.svg"> К предыдущему вопросу</button>
                                        <div class="quiz__text-title">
                                            Какой формат обучения вам подходит?
                                        </div>
                                    </div>
                                    <div class="quiz__wrapper-input col-md-4">
                                        <label for="person" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="person"
                                                value="Какой формат обучения вам подходит?-Очно">
                                            <div class="quiz__checkbox"></div>
                                            <label for="person">Очно</label>
                                        </label>
                                        <label for="absentia" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="absentia"
                                                value="Какой формат обучения вам подходит?-Заочно">
                                            <div class="quiz__checkbox"></div>
                                            <label for="absentia">Заочно</label>
                                        </label>
                                        <label for="online" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="online"
                                                value="Какой формат обучения вам подходит?-Вечернее обучение">
                                            <div class="quiz__checkbox"></div>
                                            <label for="online">Вечернее обучение</label>
                                        </label>
                                        <label for="online" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="online"
                                                value="Какой формат обучения вам подходит?-Выходного дня">
                                            <div class="quiz__checkbox"></div>
                                            <label for="online">Выходного дня</label>
                                        </label>
                                        <label for="weekends" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="weekends"
                                                value="Какой формат обучения вам подходит?-Дистанционно">
                                            <div class="quiz__checkbox"></div>
                                            <label for="weekends">Дистанционно</label>
                                        </label>
                                    </div>
                                </form>
                            </div>

                            <div class="swiper-slide swiper-slide-quiz">
                                <form class="quiz__wrapper">
                                    <div class="quiz__wrapper-text col-md-4 col-xxl-3">
                                        <button class="quiz__text-prefix swiper-btn-prev"> <img
                                                src="/tpl/imgs/Arrow-back.svg"> К предыдущему вопросу</button>
                                        <div class="quiz__text-title">
                                            Какие варианты поступления Вы рассматриваете?
                                        </div>
                                    </div>
                                    <div class="quiz__wrapper-input col-md-4">
                                        <label for="budget" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="budget"
                                                value="Какие варианты поступления Вы рассматриваете?-Бюджет">
                                            <div class="quiz__checkbox"></div>
                                            <label for="budget">Бюджет</label>
                                        </label>
                                        <label for="budgetCanvas" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="budgetCanvas"
                                                value="Какие варианты поступления Вы рассматриваете?-Бюджет и платно">
                                            <div class="quiz__checkbox"></div>
                                            <label for="budgetCanvas">Бюджет и платно</label>
                                        </label>
                                        <label for="canvas" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="canvas"
                                                value="Какие варианты поступления Вы рассматриваете?-Платно">
                                            <div class="quiz__checkbox"></div>
                                            <label for="canvas">Платно</label>
                                        </label>
                                        <label for="target" class="quiz__input-container">
                                            <input
                                                onclick="if ($(this).is(':checked')) { answersQuiz.push($(this).val());swiperQuiz.slideNext()}"
                                                type="radio" name="typeTraining" id="target"
                                                value="Какие варианты поступления Вы рассматриваете?-Целевое обучение">
                                            <div class="quiz__checkbox"></div>
                                            <label for="target">Целевое обучение</label>
                                        </label>
                                    </div>
                                </form>
                            </div>
                            <div class="swiper-slide swiper-slide-quiz form-lender">
                                <form class="quiz__wrapper-form quize-form">
                                    <div class="quiz__wrapper-text">
                                        <div class="quiz__text-title">
                                            Специалист «Единой приёмной комиссии» подобрал программу обучения
                                        </div>
                                    </div>
                                    <div class="form__wrapper">
                                        <div class="col-md-3">
                                            <input class='form__wrapper-input form__name' type="text" placeholder="Имя" required>
                                        </div>
                                        <div class="col-md-3">
                                            <input class='form__wrapper-input form__tel validate quize-form__input quize-form__input--tel' type="tel"
                                                placeholder="Телефон +7XXXXXXXXXX" required pattern="\+7\s?[\(]{0,1}[0-9]{3}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}">
                                        </div>
                                        <div class="col-md-3">
                                            <input class='form__wrapper-input form__email' type="email" placeholder="E-mail">
                                        </div>
                                        <input type="text" hidden id="ylead-vuz-id" value="[vuz_id]" required>
                                        <button type="submit" id="sabmit"
                                            class="form__wrapper-btn btn col-md-3">Отправить</button>
                                    </div>
                                    <div class="form__checkbox">
                                        <input type="checkbox" name="comfirm" id="quiz-comfirm-form" checked required>
                                        <label for="quiz-comfirm-form">Даю согласие на обработку персональных данных,
                                            согласен на получение информационных сообщений и соглашаюсь с <a
                                                href='/docs/pdf/privacy_policy.pdf' target='_blank'>Политикой
                                                конфиденциальности</a></label>
                                    </div>
                                </form>
                            </div>
                            <div class="swiper-slide swiper-slide-quiz start__quiz">
                                <div class="quiz__wrapper">
                                    <div class="quiz__wrapper-text last-slide-quiz">
                                        <p>Спасибо, что доверился команде EduNetwork!</p>
                                        
                                        <p>Подпишись на наш телеграм-канал, где самая новая и полезная информация о вузах, колледжах и не только 😉</p>
                                        
                                        <p><a href="https://t.me/edunetworkru">👉🏼 ПОДПИСАТЬСЯ 👈🏼</a></p>
                                        
                                        <p>За подписку каждому ДАРИМ ЧЕК-ЛИСТ по подбору вуза или колледжа 😇</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/swiper@7/swiper-bundle.min.js"></script>

<script>
    const swiperQuiz = new Swiper('.quiz-swiper__college', {
        speed: 400,
        spaceBetween: 100,
        slidesPerView: 1,
        slideToClickedSlide: false,
        allowTouchMove: false,
        effect: 'fade',
        touchMoveStopPropagation: true,
        shortSwipes: false,
        simulateTouch: false,
        navigation: {
            nextEl: '.swiper-btn-next',
            prevEl: '.swiper-btn-prev',
        },
    });

    // console.log('Я в этом документе');

    const answersQuiz = [];
    // function reset() {
    // console.log('click')
    // element.preventDefault(console.log('click'))
    // swiperQuiz.slideNext(console.log('click'))
    // if ($(this).is(':checked')) {

    // }
    // }
    $('.swiper-wrapper').on('click', function () {
        if (swiperQuiz.realIndex == 1) {
            $('.swiper-wrapper').css('background', '#EFE9C5')
            $('.quiz').css('background', '#EFE9C5')
        }
    })
    $('.swiper-btn-prev').on('click', function quizPop() {
        answersQuiz.pop()
    })
    // $('input').on('click', function(){
    //     e.preventDefault()
    //     console.log('click');
    // })
    // $('.quiz__checkbox').on('click', function(){
    // e.preventDefault()
    // console.log('click');
    //     if ($(this).is(':checked')) {
    //         swiperQuiz.slideNext()
    //     }
    // })
    // $('.quiz__input-container').on('click', function(){
    //     if($(this).is(':checked')){
    //         answersQuiz.push($(this).val())
    //         swiperQuiz.slideNext() 
    //     }
    // })

    $(".form-lender form").submit(function (e) {
        e.preventDefault();
        const $form = $(this).closest('form');
        let utms = '';
        let medium = '';
        if (window.location.search.substring(1).includes('utm_source=')) {
            utms += 'utm_source=edunetwork_ads';
            const regex = /(^|\&)utm_medium=([\wа-яА-ЯёЁ\.\-]+)/g;
            if ((medium = regex.exec(window.location.search.substring(1))) !== null) {
                medium = (medium[2]);
            }
        } else {
            utms += 'utm_source=edunetwork_seo';
        }
        utms += '&utm_campaign=' + $('h1').text().replace(/[\&\?=\\\/]/g, '').trim() +
            (medium ? '&utm_medium=' + medium : '') + '&utm_term=' + ($form.attr('name') ? $form.attr('name') : 'quiz');
        const submitText = $("button", $form).text();
        let a = true;
        $(".validate", $form).each(function () {
            if (!$(this).is(".valid")) {
                M.toast({ html: 'Не все поля заполнены корректно' });
                a = false;
                return false;
            }
        });
        if (a) {
            $("button", $form).attr("disabled", "disabled").html("Отправка");
            $.ajax({
                type: 'POST',
                url: Ednw.config.protocol+'://mods'+Ednw.config.domain+'/ylead.php',
                data: {
                    name: $form.find('.form__name').val(),
                    email: $form.find('.form__email').val(),
                    phone: $form.find('.form__tel').val(),
                    vuz_id: $('#ylead-vuz-id').val().trim(),
                    comment: answersQuiz.join(','),
                    land : 'edu_vuz',
                    utms: utms
                },
                success: function (msg) {
                    if (msg === 'Ok') {
                        M.toast({ html: 'Заявка успешно отправлена' });
                        $("button", $form).html('Готово!');
                        swiperQuiz.slideNext() 
                        // document.location.href = "/thanks"
                    } else {
                        $("button", $form).html(submitText).removeAttr("disabled");
                        if (msg.substr(0, 3) === 'Err') {
                            M.toast({ html: msg.substr(4) });
                        } else {
                            M.toast({ html: 'Заявка не отправлена. Некорректный ответ сервера. Если у вас активен блокировщик рекламы - отключите его временно или полностью для сайта edunetwork и повторите отправку формы/заявки.' });
                        }
                    }
                },
                error: function () {
                    $("button", $form).html(submitText).removeAttr("disabled");
                    M.toast({ html: 'Ошибка сервера' });
                }
            });
        }
    });
</script>