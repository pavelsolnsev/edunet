<!DOCTYPE html>
<html lang="en">
<meta name = "robots" content="noindex, nofollow">
    [head]

<body class="professii">
    [roof]
    <!-- хлебные крошки -->
    <div class="top__title">
      <div class="container">
        <h1 class="maine__title title">
          Профессии
        </h1>
      </div>
    </div>
    <div class="sort">
      <div class="container">
        <div class="sort__select">
          <label>Сортировать:</label>
          <select id="mediatheque__category" name="category"> 
            <option value="standart" selected="selected">Алфавиту</option>
            <option value="average__salary">Средней заработной плате</option>
            <option value="popularity">Популярность</option>
          </select>
        </div>
      </div>
    </div>
    <div class="container">
        <div class="row">
          <div class="col-md-12 col-lg-9 col-xxl-10 offset-md-0 offset-lg-0 offset-xxl-0">
            <div class="alphabet">
              <div class="alphabet__container">
                <div class="active">Все</div>

              </div>
            </div>
          </div>
          <div class="profesii__container">
          </div>
          <div class="listPage">

          </div>
          <div class="col-md-4 col-lg-3 col-xxl-2 offset-lg-0 offset-xxl-0 sidebar__column">
              <h3 class="sidebar__title title">Направление:</h3>
              <form>
                  <div class="form-check"><input class="form-check-input" type="checkbox" id="formCheck-1"><label class="form-check-label" for="formCheck-1">Обучение</label></div>
              </form>
          </div>
        </div>

    </div>

  [footer] <div class="arrow-top" id="arrow-top">
	<img src="/tpl/imgs/main-arrow.svg" >
</div>
    <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/6.4.8/swiper-bundle.min.js"></script>
    <script>
      $(document).ready(function() {
        let listPage = 0 
        addItem ()
        let page = 1;
        function addItem() {
          $('.profesii__container').empty();
          $('.listPage').empty();
          $.ajax({
            url: 'https://vuz.edunetwork.ru/?act=api&list_type=vuz_profs&type=json&limit=15&offset=' + listPage,         /* Куда пойдет запрос */ 
            method: 'get', /* Параметры передаваемые в запросе. */
            success: function(data){ 
              for (i = 0; i < data.data.length; i++) {
                let title = data.data[i].name,
                    prefix = data.data[i].short_text,
                    vuz = data.data[i].vuz,
                    college = data.data[i].college,
                    item__footer = `<div class="none"><div>`;
                if(vuz && college != undefined){
                  item__footer = 
                  `<div class="item__footer">
                    <div class="item__footer-vuz counter">`
                      + vuz +
                    `</div>
                    <div class="item__footer-college counter">`
                      + college +
                    `</div>
                  </div>`;
                }
                $('<a href="/professiiArticle/?id=' + data.data[i].id + '" class="profesii__container-item"><div class="item__header"><div class="item__header-text"><div class="item__header-title">' + title +'</div><div class="item__header-prefix">' + prefix + '</div></div><div class="item__header-logo"><img src="https://imgholder.ru/300x300/8493a8/adb9ca&text=IMAGE+HOLDER&font=kelson"></div></div>'+ item__footer +'</a>').appendTo( ".profesii__container" )
                $('<div> '+ data.a_filter[i] +' </div>').appendTo('.alphabet__container')
              }
              entryAlfa()
              for (j = 1; j <= Math.ceil(data.pgntr.total/15); j++) {
                $('<a class="listPage__number">' + j + '</a>').appendTo('.listPage')
              }
              addListNumber()
            }
          });
        }
        function ajaxRequest(el) {
          $('.profesii__container').empty();
          $('.listPage').empty();
          $.ajax({
            url: 'https://vuz.edunetwork.ru/?act=api&list_type=vuz_profs&type=json&limit=15&offset=' + listPage + '&a_name=' + el,         /* Куда пойдет запрос */ 
            method: 'get', /* Параметры передаваемые в запросе. */
            success: function(data){ 
            for (i = 0; i < data.data.length; i++) {
              let title = data.data[i].name,
                    prefix = data.data[i].short_text,
                    vuz = data.data[i].vuz,
                    college = data.data[i].college,
                    item__footer = `<div class="none"><div>`;
                if(vuz && college != undefined){
                  item__footer = 
                  `<div class="item__footer">
                    <div class="item__footer-vuz counter">`
                      + vuz +
                    `</div>
                    <div class="item__footer-college counter">`
                      + college +
                    `</div>
                  </div>`;
                }
                $('<a href="/professiiArticle/?id=' + data.data[i].id + '" class="profesii__container-item"><div class="item__header"><div class="item__header-text"><div class="item__header-title">' + title +'</div><div class="item__header-prefix">' + prefix + '</div></div><div class="item__header-logo"><img src="https://imgholder.ru/300x300/8493a8/adb9ca&text=IMAGE+HOLDER&font=kelson"></div></div>'+ item__footer +'</a>').appendTo( ".profesii__container" )
                $('<div> '+ data.a_filter[i] +' </div>').appendTo('.alphabet__container')
              }
              addListNumber()
            }
          });
        }
        function entryAlfa() {
          $('.alphabet__container div').on('click', function(e) {
            $('.active').removeClass('active');
            $(this).addClass('active')
            ajaxRequest(this.innerText)
          })
        }

        function addListNumber() {
          $('.listPage__number').on('click', function() {
            $(this).css({ "backgroundColor": "#fff",
              "borderLeft": "1px solid green" })
            listPage = 15 * Number(this.innerText) - 15
            addItem()
          })
        }
      });

</script>
</body>

</html>